<!-- Archivo: notas.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Notas</title>

  <!-- Vincula el mismo archivo de estilos que usás en index.html -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Encabezado de la página de notas -->
  <h1 class="titulo">Notas</h1>

  <!-- Contenedor principal de notas -->
  <section class="seccion-notas">
    <!-- Este es un ejemplo de una nota -->
    <article class="nota">
      <h2>Pensamiento #1</h2>
      <p>Algo sobre fragmentación, señales débiles o memoria visual en degradación.</p>
    </article>

    <!-- Segundo ejemplo de nota -->
    <article class="nota">
      <h2>Pensamiento #2</h2>
      <p>¿Qué se almacena y qué se borra en un archivo sin indexar?</p>
    </article>
  </section>

  <!-- Enlace para volver a la página principal -->
  <a href="index.html" class="enlace-sutil">← volver a RAW_INPUT</a>
</body>
</html>

<script>
  // Este evento espera que el usuario haga clic en "Publicar"
  document.getElementById("enviar-nota").addEventListener("click", async () => {
    const texto = document.getElementById("nota-texto").value;

    // Obtenemos el token de autenticación del usuario
   // const user = netlifyIdentity.currentUser();
    //const token = await user.jwt();

    const respuesta = await fetch("/.netlify/functions/guardar-nota", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${token}`
      },
      body: JSON.stringify({ texto })
    });

    const resultado = await respuesta.json();
    alert(resultado.message);
  });
</script>